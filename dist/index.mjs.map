{"version":3,"sources":["../src/shared/utilities.ts","../src/core/RectifyConfigs.ts","../src/core/RectifyJsx.ts","../src/rectify-dom-binding/events/RectifyEventHandler.ts","../src/rectify-fiber/RectifyFiberTags.ts","../src/rectify-fiber/RectifyFiberFlags.ts","../src/rectify-fiber/RectifyFiber.ts","../src/rectify-fiber/RectifyFiberRoot.ts","../src/rectify-dom-binding/events/RectifyEventPlugin.ts","../src/rectify-hook/RectifyHookBuilder.ts","../src/rectify-hook/RectifyHook.ts","../src/rectify-fiber/RectifyFiberReconciler.ts","../src/rectify-dom/RectifyDomRoot.ts"],"names":["setCurrentlyRenderingFiber","getCurrentlyRenderingFiber","setFiberHookIndex","getFiberHookIndex","setScheduleUpdateOnFiber","scheduleUpdateOnFiber"],"mappings":"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","file":"index.mjs","sourcesContent":["export function isObject(value: unknown) {\n  return typeof value === \"object\";\n}\n\nexport function isPlainObject<T = Record<string, unknown>>(\n  value: unknown,\n): value is T {\n  return value !== null && !Array.isArray(value) && typeof value === \"object\";\n}\n\nexport const isFunction = (v: unknown): v is Function =>\n  typeof v === \"function\";\n\nexport const isString = (v: unknown): v is string => typeof v === \"string\";\n\nexport const isNumber = (v: unknown): v is number => typeof v === \"number\";\n\nexport const isText = (v: unknown): v is string | number =>\n  isNumber(v) || isString(v);\n\nexport const isArray = (v: unknown): v is unknown[] => Array.isArray(v);\n","export const RECTIFY_ELEMENT_TYPE = Symbol.for(\"rectify.element\");\n","import { isPlainObject } from \"@rectify/shared/utilities\";\nimport { RECTIFY_ELEMENT_TYPE } from \"./RectifyConfigs\";\nimport {\n  RectifyElementProps,\n  RectifyElementType,\n  RectifyElement,\n} from \"./RectifyTypes\";\n\nconst RectifyElementJsx = <P = Record<string, any>, K = any>(\n  type: RectifyElementType,\n  props?: RectifyElementProps<P, K>,\n): RectifyElement => {\n  return {\n    $$typeof: RECTIFY_ELEMENT_TYPE,\n    type,\n    props,\n    key: isPlainObject(props) ? (props.key ?? null) : null,\n    ref: isPlainObject(props) ? (props.ref ?? null) : null,\n  };\n};\n\nexport const jsx = (type: any, props?: any) => {\n  return RectifyElementJsx(type, props);\n};\n","const EVENT_HANDLERS_KEY = \"__rectifyEventHandlers__\";\n\nconst RectifyEventSupported = [\n  \"click\",\n  \"input\",\n  \"change\",\n  \"keydown\",\n  \"keyup\",\n  \"focus\",\n  \"blur\",\n  \"submit\",\n  \"mousedown\",\n  \"mouseup\",\n  \"mouseover\",\n  \"mouseout\",\n  \"dblclick\",\n];\n\nexport const listenAllEventSupported = (domElement: Element) => {\n  RectifyEventSupported.forEach((eventType) => {\n    domElement.addEventListener(\n      eventType,\n      (event: Event) => {\n        dispatchEvent(event, domElement);\n      },\n      false, // Bubble phase\n    );\n  });\n};\n\nconst dispatchEvent = (event: Event, domElement: Element) => {\n  const targetElement = event.target as Element;\n  if (!targetElement) return;\n  const handlers = (targetElement as any)[EVENT_HANDLERS_KEY];\n  if (!handlers) return;\n\n  const eventType = event.type; // 'click', 'input', etc.\n  const handlerName = `on${eventType}`; // 'onclick', 'oninput'\n\n  const handler = handlers[handlerName];\n\n  if (handler && typeof handler === \"function\") {\n    handler(event);\n  }\n};\n\nexport const setEventHandlers = (domElement: Element, props: any): void => {\n  const handlers: any = {};\n\n  for (const propKey in props) {\n    if (!props.hasOwnProperty(propKey)) {\n      continue;\n    }\n\n    // Check if it's an event handler (starts with 'on')\n    if (propKey.startsWith(\"on\") && typeof props[propKey] === \"function\") {\n      const eventType = propKey.toLowerCase(); // 'onclick', 'oninput'\n      handlers[eventType] = props[propKey];\n    }\n  }\n\n  // Store handlers on the DOM element\n  if (Object.keys(handlers).length > 0) {\n    (domElement as any)[EVENT_HANDLERS_KEY] = handlers;\n  }\n};\n","export type RectifyFiberTags = symbol;\n\nexport const HostRoot = Symbol.for(\"rectify.fiber.host-root\");\nexport const HostComponent = Symbol.for(\"rectify.fiber.host-component\");\nexport const HostText = Symbol.for(\"rectify.fiber.host-text\");\nexport const FunctionComponent = Symbol.for(\"rectify.fiber.function-component\");\n","export type RectifyFiberFlags = number;\n\nexport const NoFlags = 0b000000;\nexport const Placement = 0b000001; // Insert into DOM\nexport const Update = 0b000010; // Update existing DOM\nexport const Deletion = 0b000100; // Remove from DOM\n","import { RectifyElementProps, RectifyNode } from \"@rectify/core/RectifyTypes\";\nimport {\n  FunctionComponent,\n  HostComponent,\n  HostText,\n  RectifyFiberTags,\n} from \"./RectifyFiberTags\";\nimport { Fiber } from \"./RectifyFiberTypes\";\nimport { NoFlags } from \"./RectifyFiberFlags\";\nimport {\n  isArray,\n  isFunction,\n  isPlainObject,\n  isText,\n} from \"@rectify/shared/utilities\";\n\nexport const createRectifyFiber = (\n  tag: RectifyFiberTags,\n  props?: RectifyElementProps,\n): Fiber => {\n  const fiber: Fiber = {\n    root: null,\n    tag,\n    props,\n    key: isPlainObject(props) ? (props.key ?? null) : null,\n    memorizedProps: null,\n    flags: NoFlags,\n    type: null,\n    stateNode: null,\n    alternate: null,\n    return: null,\n    firstChild: null,\n    sibling: null,\n    ref: isPlainObject(props) ? (props.ref ?? null) : null,\n    index: 0,\n    memorizedHook: null,\n  };\n\n  return fiber;\n};\n\nexport const createRectifyFiberBuilder = (\n  current: Fiber,\n  props?: RectifyElementProps,\n) => {\n  let fiberBuilding = current.alternate;\n\n  if (!fiberBuilding) {\n    fiberBuilding = createRectifyFiber(current.tag, props);\n    fiberBuilding.type = current.type;\n    fiberBuilding.stateNode = current.stateNode;\n\n    fiberBuilding.alternate = current;\n    current.alternate = fiberBuilding;\n  } else {\n    fiberBuilding.props = props;\n    fiberBuilding.type = current.type;\n\n    // Reset effect flags\n    fiberBuilding.flags = NoFlags;\n  }\n\n  fiberBuilding.firstChild = current.firstChild;\n  fiberBuilding.memorizedProps = current.memorizedProps;\n  fiberBuilding.sibling = current.sibling;\n  fiberBuilding.index = current.index;\n  fiberBuilding.ref = current.ref;\n\n  return fiberBuilding;\n};\n\nexport const createFiberFromRectifyNode = (node: RectifyNode): Fiber | null => {\n  if (isText(node)) {\n    return createRectifyFiber(HostText, node);\n  }\n\n  if (isPlainObject(node)) {\n    const tag = isFunction(node.type) ? FunctionComponent : HostComponent;\n    const fiberNode = createRectifyFiber(tag, node.props);\n    fiberNode.type = node.type;\n    return fiberNode;\n  }\n\n  if (isArray(node)) {\n    let firstFiber: Fiber | null = null;\n    let prevFiber: Fiber | null = null;\n    for (let i = 0; i < node.length; i++) {\n      const nodeItem = node[i];\n      if (!nodeItem) continue;\n      const fiber = createFiberFromRectifyNode(nodeItem);\n      if (!fiber) continue;\n      fiber.index = i;\n      if (!firstFiber) {\n        firstFiber = fiber;\n      } else if (prevFiber) {\n        prevFiber.sibling = fiber;\n      }\n      prevFiber = fiber;\n    }\n    return firstFiber;\n  }\n  return null;\n};\n","import { createRectifyFiber } from \"./RectifyFiber\";\nimport { HostRoot } from \"./RectifyFiberTags\";\nimport { FiberRoot } from \"./RectifyFiberTypes\";\n\nexport const createFiberRoot = (container: Element): FiberRoot => {\n  const fiber = createRectifyFiber(HostRoot);\n\n  const root: FiberRoot = {\n    current: fiber,\n    container,\n  };\n\n  fiber.stateNode = container;\n  fiber.root = root;\n\n  return root;\n};\n","import { RectifyElementProps } from \"@rectify/core/RectifyTypes\";\nimport { isFunction, isPlainObject } from \"@rectify/shared/utilities\";\nimport { setEventHandlers } from \"./RectifyEventHandler\";\n\nexport const setDOMProperties = (\n  domElement: Element,\n  props: RectifyElementProps,\n) => {\n  if (!isPlainObject(props)) return;\n\n  for (const [key, value] of Object.entries(props)) {\n    // Skip internal / unsupported props\n    if (\n      key === \"children\" ||\n      key === \"key\" ||\n      key === \"class\" ||\n      !Object.prototype.hasOwnProperty.call(props, key)\n    ) {\n      continue;\n    }\n\n    // Event handlers (onClick, onInput, ...)\n    if (key.startsWith(\"on\") && isFunction(value)) {\n      setEventHandlers(domElement, props);\n      continue;\n    }\n\n    // Normalize className\n    if (key === \"className\") {\n      domElement.setAttribute(\"class\", String(value));\n      continue;\n    }\n\n    // Boolean attributes (disabled, checked, ...)\n    if (typeof value === \"boolean\") {\n      if (value) {\n        domElement.setAttribute(key, \"\");\n      } else {\n        domElement.removeAttribute(key);\n      }\n      continue;\n    }\n\n    // Normal attributes\n    if (value != null) {\n      domElement.setAttribute(key, String(value));\n    }\n  }\n};\n","import { Fiber } from \"@rectify/rectify-fiber/RectifyFiberTypes\";\n\ntype InstanceHookBuilder = {\n  currentlyRenderingFiber: Fiber | null;\n  fiberHookIndex: number;\n  scheduleUpdateOnFiber: (fiber: Fiber) => void;\n};\n\nexport const createRectifyHookBuilder = () => {\n  const instance: InstanceHookBuilder = {\n    currentlyRenderingFiber: null,\n    fiberHookIndex: 0,\n    scheduleUpdateOnFiber: () => {\n      console.warn(\"Schedule hook unimplemented\");\n    },\n  };\n\n  const setCurrentlyRenderingFiber = (fiber: Fiber | null) => {\n    instance.currentlyRenderingFiber = fiber;\n  };\n\n  const getCurrentlyRenderingFiber = () => {\n    return instance.currentlyRenderingFiber;\n  };\n\n  const setFiberHookIndex = (num: number) => {\n    instance.fiberHookIndex = num;\n  };\n\n  const getFiberHookIndex = () => {\n    return instance.fiberHookIndex;\n  };\n\n  const setScheduleUpdateOnFiber = (updater: (fiber: Fiber) => void) => {\n    instance.scheduleUpdateOnFiber = updater;\n  };\n\n  const scheduleUpdateOnFiber = (fiber: Fiber) => {\n    instance.scheduleUpdateOnFiber(fiber);\n  };\n\n  return {\n    setCurrentlyRenderingFiber,\n    getCurrentlyRenderingFiber,\n    setFiberHookIndex,\n    getFiberHookIndex,\n    setScheduleUpdateOnFiber,\n    scheduleUpdateOnFiber,\n  };\n};\n","import { Fiber } from \"@rectify/rectify-fiber/RectifyFiberTypes\";\nimport { createRectifyHookBuilder } from \"./RectifyHookBuilder\";\nimport { Dispatcher, RectifyHook, Update } from \"./RectifyHookTypes\";\nimport { isFunction } from \"@rectify/shared/utilities\";\n\nconst {\n  setCurrentlyRenderingFiber,\n  getCurrentlyRenderingFiber,\n  setFiberHookIndex,\n  getFiberHookIndex,\n  setScheduleUpdateOnFiber: setScheduleUpdateOnFiberAction,\n  scheduleUpdateOnFiber,\n} = createRectifyHookBuilder();\n\nexport const setScheduleUpdateOnFiber = setScheduleUpdateOnFiberAction;\n\nexport class RectifyHookRenderer {\n  constructor(\n    private fiber: Fiber,\n    private Component: Function,\n    private props: any,\n  ) {}\n\n  render() {\n    setCurrentlyRenderingFiber(this.fiber);\n    setFiberHookIndex(0);\n    const children = this.Component(this.props);\n    setCurrentlyRenderingFiber(null);\n    setFiberHookIndex(0);\n    return children;\n  }\n}\n\nexport const useState = <T>(\n  initialValue: T | (() => T),\n): [T, Dispatcher<T>] => {\n  const currentFiber = getCurrentlyRenderingFiber()!;\n\n  const hook = updateFiberHook<T>(currentFiber);\n\n  // Initialize state on first render\n  if (hook.memoizedState === undefined) {\n    hook.memoizedState = isFunction(initialValue)\n      ? initialValue()\n      : initialValue;\n  }\n\n  // Process updates\n  if (hook.queue !== null) {\n    const queue = hook.queue;\n    let update = queue.pending;\n\n    if (update !== null) {\n      let newState = hook.memoizedState;\n\n      // Process circular linked list of updates\n      const first = update;\n      do {\n        const action = update.action;\n        newState = isFunction(action) ? action(newState) : action;\n        update = update?.next!\n      } while (update !== first);\n\n      hook.memoizedState = newState;\n      queue.pending = null;\n    }\n  }\n\n  const setState: Dispatcher<T> = (action) => {\n    const update: Update<T> = {\n      action,\n      next: null,\n    };\n\n    // Initialize queue if needed\n    if (hook.queue === null) {\n      hook.queue = {\n        pending: null,\n      };\n    }\n\n    const queue = hook.queue;\n\n    // Add update to circular linked list\n    if (queue.pending === null) {\n      update.next = update;\n    } else {\n      update.next = queue.pending.next!;\n      queue.pending.next = update;\n    }\n    queue.pending = update;\n\n    // Schedule re-render\n    scheduleUpdateOnFiber(currentFiber);\n  };\n\n  return [hook.memoizedState, setState];\n};\n\nconst updateFiberHook = <T>(fiber: Fiber): RectifyHook<T> => {\n  let hook: RectifyHook;\n\n  const currentHook = getCurrentHook(fiber);\n\n  if (currentHook === null) {\n    // Mount - create new hook\n    hook = {\n      memoizedState: undefined,\n      queue: null,\n      next: null,\n    };\n  } else {\n    // Update - clone hook\n    hook = {\n      memoizedState: currentHook.memoizedState,\n      queue: currentHook.queue,\n      next: null,\n    };\n  }\n\n  // Add hook to fiber's hook list\n  if (fiber.memorizedHook === null) {\n    fiber.memorizedHook = hook;\n  } else {\n    // Find last hook and append\n    let lastHook = fiber.memorizedHook;\n    while (lastHook.next !== null) {\n      lastHook = lastHook.next;\n    }\n    lastHook.next = hook;\n  }\n\n  let index = getFiberHookIndex();\n  setFiberHookIndex(index++);\n  return hook;\n};\n\nconst getCurrentHook = (fiber: Fiber): RectifyHook | null => {\n  const alternate = fiber.alternate;\n  if (alternate === null) {\n    return null;\n  }\n\n  let hook = alternate.memorizedHook;\n  for (let i = 0; i < getFiberHookIndex(); i++) {\n    if (hook === null) return null;\n    hook = hook.next;\n  }\n\n  return hook;\n};\n","import { RectifyNode } from \"@rectify/core\";\nimport { createFiberRoot } from \"./RectifyFiberRoot\";\nimport { Fiber, FiberRoot } from \"./RectifyFiberTypes\";\nimport {\n  createFiberFromRectifyNode,\n  createRectifyFiberBuilder,\n} from \"./RectifyFiber\";\nimport {\n  FunctionComponent,\n  HostComponent,\n  HostRoot,\n  HostText,\n} from \"./RectifyFiberTags\";\nimport { isFunction, isPlainObject, isText } from \"@rectify/shared/utilities\";\nimport { Placement, Update } from \"./RectifyFiberFlags\";\nimport { setDOMProperties } from \"@rectify/rectify-dom-binding/events/RectifyEventPlugin\";\nimport {\n  RectifyHookRenderer,\n  setScheduleUpdateOnFiber,\n} from \"@rectify/rectify-hook/RectifyHook\";\n\nexport const createContainer = (container: Element) => {\n  const root = createFiberRoot(container);\n\n  setScheduleUpdateOnFiber((fiber) => {\n    const hostRoot = getHostRootFiber(fiber);\n    if (!hostRoot) return;\n    const fiberBuilder = createRectifyFiberBuilder(hostRoot, hostRoot.props);\n    syncFiber(fiberBuilder);\n    completeFiber(fiberBuilder);\n    commitFiber(fiberBuilder);\n    if (hostRoot.root) {\n      hostRoot.root.current = fiberBuilder;\n    }\n  });\n  return root;\n};\n\nexport const updateContainer = (children: RectifyNode, root: FiberRoot) => {\n  const current = root.current;\n  const fiberBuilder = createRectifyFiberBuilder(current, { children });\n  syncFiber(fiberBuilder);\n  completeFiber(fiberBuilder);\n  commitFiber(fiberBuilder);\n  root.current = fiberBuilder;\n};\n\nconst syncFiber = (fiber: Fiber) => {\n  syncFiberNode(fiber);\n};\n\nconst syncFiberNode = (fiber: Fiber) => {\n  const child = updateFiberChildren(fiber);\n\n  let node = child;\n  while (node) {\n    syncFiberNode(node);\n    node = node.sibling;\n  }\n};\n\nconst completeFiber = (fiberBuilder: Fiber) => {\n  const current = fiberBuilder.alternate;\n\n  switch (fiberBuilder.tag) {\n    case HostComponent: {\n      if (current) {\n        fiberBuilder.stateNode = current.stateNode;\n        break;\n      }\n      if (!isText(fiberBuilder.type)) {\n        break;\n      }\n      const type = fiberBuilder.type;\n      const instance = document.createElement(type);\n      fiberBuilder.stateNode = instance;\n      setDOMProperties(instance, fiberBuilder.props);\n      break;\n    }\n    case HostText: {\n      if (current) {\n        fiberBuilder.stateNode = current.stateNode;\n        break;\n      }\n      const instance = document.createTextNode(\n        String(isPlainObject(fiberBuilder.props) ? \"\" : fiberBuilder.props),\n      );\n\n      fiberBuilder.stateNode = instance;\n      break;\n    }\n    case HostRoot: {\n      // Root already has stateNode = container\n      break;\n    }\n    default:\n      break;\n  }\n\n  let child = fiberBuilder.firstChild;\n  while (child) {\n    completeFiber(child);\n    child = child.sibling;\n  }\n};\n\nconst commitFiber = (fiber: Fiber) => {\n  let child = fiber.firstChild;\n  while (child) {\n    commitFiber(child);\n    child = child.sibling;\n  }\n\n  const flags = fiber.flags;\n\n  if (flags & Update) {\n    commitFiberUpdate(fiber);\n    fiber.flags &= ~Update;\n  }\n\n  if (flags & Placement) {\n    commitFiberPlacement(fiber);\n    fiber.flags &= ~Placement;\n  }\n};\n\nconst commitFiberUpdate = (fiberBuilder: Fiber) => {};\n\nconst commitFiberPlacement = (fiber: Fiber) => {\n  if (fiber.tag !== HostComponent && fiber.tag !== HostText) return;\n\n  const hostParent = getHostParentFiber(fiber);\n  if (!hostParent) return;\n\n  const parent = hostParent.stateNode;\n  if (parent && fiber.stateNode) {\n    parent.appendChild(fiber.stateNode);\n  }\n};\n\nconst getHostParentFiber = (fiber: Fiber): Fiber | null => {\n  let parent: Fiber | null = fiber.return;\n\n  while (parent) {\n    if (parent.tag === HostComponent || parent.tag === HostRoot) {\n      return parent;\n    }\n    parent = parent?.return;\n  }\n\n  return null;\n};\n\nconst getHostRootFiber = (fiber: Fiber) => {\n  let node: Fiber | null = fiber;\n  while (node && node.tag !== HostRoot) node = node.return;\n  return node;\n};\n\nconst updateFiberChildren = (fiber: Fiber): Fiber | null => {\n  const canHaveChildren = [HostComponent, HostRoot, FunctionComponent];\n  if (!canHaveChildren.includes(fiber.tag)) {\n    return null;\n  }\n  reconcileChildren(fiber);\n  return fiber.firstChild;\n};\n\nconst reconcileChildren = (fiberBuilder: Fiber) => {\n  const nextChildren = resolveChildren(fiberBuilder);\n  const firstChild = createFiberFromRectifyNode(nextChildren);\n  if (!firstChild) return;\n\n  fiberBuilder.firstChild = firstChild;\n\n  attachFiber(firstChild, fiberBuilder);\n\n  let sibling = firstChild.sibling;\n  while (sibling) {\n    attachFiber(sibling, fiberBuilder);\n    sibling = sibling.sibling;\n  }\n};\n\nconst resolveChildren = (fiberBuilder: Fiber) => {\n  const Component = isFunction(fiberBuilder.type) && fiberBuilder.type;\n\n  if (Component) {\n    const props = fiberBuilder.props as Record<string, any>;\n    const renderWithHooks = new RectifyHookRenderer(\n      fiberBuilder,\n      Component,\n      props,\n    );\n    return renderWithHooks.render();\n  }\n\n  if (isPlainObject(fiberBuilder.props)) {\n    return fiberBuilder.props.children;\n  }\n\n  // Text node\n  return fiberBuilder.props;\n};\n\nconst attachFiber = (fiberBuilder: Fiber, parentFiberBuilder: Fiber) => {\n  fiberBuilder.return = parentFiberBuilder;\n\n  // if existing current fiber\n  if (fiberBuilder.alternate) {\n    fiberBuilder.flags |= Update;\n  } else {\n    fiberBuilder.flags |= Placement;\n  }\n};\n","import { RectifyNode } from \"@rectify/core\";\nimport { listenAllEventSupported } from \"@rectify/rectify-dom-binding/events/RectifyEventHandler\";\nimport {\n  createContainer,\n  updateContainer,\n} from \"@rectify/rectify-fiber/RectifyFiberReconciler\";\nimport { FiberRoot } from \"@rectify/rectify-fiber/RectifyFiberTypes\";\n\nclass RectifyDomRoot {\n  constructor(private fiberRoot: FiberRoot) {}\n\n  render(node: RectifyNode) {\n    const root = this.fiberRoot;\n    updateContainer(node, root);\n  }\n}\n\nexport const createRoot = (container: Element) => {\n  const root = createContainer(container);\n  listenAllEventSupported(container);\n  return new RectifyDomRoot(root);\n};\n"]}